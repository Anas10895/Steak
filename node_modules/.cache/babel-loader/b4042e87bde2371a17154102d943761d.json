{"ast":null,"code":"var _jsxFileName = \"/Users/anasshar/Documents/GitHub/SEI/projects/Steak/coffee/src/components/Test.jsx\";\nimport React, { Component } from 'react';\nimport { Map, GoogleApiWrapper, Marker } from 'google-maps-react';\nimport { connect } from 'react-redux';\nimport { saveMapCoords } from '../redux/actions/index';\nimport { Redirect } from 'react-router-dom';\nimport { Button } from 'semantic-ui-react';\nimport InfoWindowEx from './infoWindowEx';\nimport '../styles/navbar.scss';\n\nconst uuidv1 = require('uuid/v1');\n\nexport class Maps extends Component {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      data: [],\n      loc_x: 0,\n      loc_y: 0,\n      locRendered: false,\n      showingInfoWindow: false,\n      activeMarker: {},\n      selectedPlace: {},\n      redirect: false,\n      redirectId: 0\n    };\n\n    this.getUserLocation = () => {\n      if (navigator.geolocation) {\n        navigator.geolocation.getCurrentPosition(this.showPosition);\n      }\n    };\n\n    this.showPosition = position => {\n      this.setState({\n        loc_x: position.coords.latitude,\n        loc_y: position.coords.longitude,\n        locRendered: true\n      });\n    };\n\n    this.fetchRequestLocations = () => {\n      fetch(`https://neighborapp-backend.herokuapp.com/requests/`, {\n        method: 'GET',\n        headers: {\n          'Content-Type': 'application/json',\n          'X-User-Email': localStorage.getItem('email'),\n          'X-User-Token': localStorage.getItem('token')\n        }\n      }).then(res => res.json()).then(data => {\n        this.setState({\n          data: data.data\n        });\n        setTimeout(() => {\n          this.fetchRequestLocations();\n        }, 20000);\n      });\n    };\n\n    this.saveCoords = (mapProps, map, clickEven) => {\n      if (window.location.pathname === '/c/request') {\n        this.props.saveMapCoords(clickEven.latLng.lat(), clickEven.latLng.lng());\n        document.querySelector('.custom-modal').style.visibility = 'visible';\n        document.querySelector('.fader').style.visibility = 'visible';\n      }\n    };\n\n    this.openContribution = id => {\n      document.querySelector('.fader').style.visibility = 'visible';\n      this.setState({\n        redirect: true,\n        redirectId: id,\n        showingInfoWindow: false\n      });\n    };\n\n    this.renderRedirect = () => {\n      if (this.state.redirect) {\n        return React.createElement(Redirect, {\n          to: `/c/contribution/${this.state.redirectId}`,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 77\n          },\n          __self: this\n        });\n      }\n    };\n\n    this.centerMoved = (mapProps, map) => {\n      this.setState({\n        loc_x: map.center.lat(),\n        loc_y: map.center.lng()\n      });\n    };\n\n    this.onMarkerClick = (props, marker) => {\n      this.setState({\n        selectedPlace: props.data,\n        activeMarker: marker,\n        showingInfoWindow: true,\n        redirect: false\n      });\n    };\n  }\n\n  componentWillMount() {\n    this.getUserLocation();\n  }\n\n  componentDidMount() {\n    this.fetchRequestLocations();\n  }\n\n  render() {\n    return React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 98\n      },\n      __self: this\n    }, this.renderRedirect(), this.state.locRendered ? React.createElement(Map, {\n      google: this.props.google,\n      zoom: 14,\n      styles: this.props.mapStyles,\n      disableDefaultUI: true,\n      onClick: this.saveCoords,\n      onDragend: this.centerMoved,\n      initialCenter: {\n        lat: this.state.loc_x,\n        lng: this.state.loc_y\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 101\n      },\n      __self: this\n    }, this.state.data.map(m => {\n      if (m.status === 'open') {\n        if (m.request_type === 'normal') {\n          return React.createElement(Marker, {\n            key: uuidv1(),\n            position: {\n              lat: m.x,\n              lng: m.y\n            },\n            title: m.title,\n            data: m,\n            onClick: this.onMarkerClick,\n            icon: {\n              url: '../../data/welfareroom.png',\n              anchor: new this.props.google.maps.Point(48, 48),\n              scaledSize: new this.props.google.maps.Size(48, 48)\n            },\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 117\n            },\n            __self: this\n          });\n        } else {\n          return React.createElement(Marker, {\n            key: uuidv1(),\n            position: {\n              lat: m.x,\n              lng: m.y\n            },\n            title: m.title,\n            data: m,\n            onClick: this.onMarkerClick,\n            icon: {\n              url: '../../data/tortillas1.png',\n              anchor: new this.props.google.maps.Point(48, 48),\n              scaledSize: new this.props.google.maps.Size(48, 48)\n            },\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 132\n            },\n            __self: this\n          });\n        }\n      }\n    }), React.createElement(InfoWindowEx, {\n      marker: this.state.activeMarker,\n      visible: this.state.showingInfoWindow,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 148\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 149\n      },\n      __self: this\n    }, React.createElement(\"h1\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 150\n      },\n      __self: this\n    }, this.state.selectedPlace.title), React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 151\n      },\n      __self: this\n    }, this.state.selectedPlace.description), React.createElement(\"br\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 152\n      },\n      __self: this\n    }), React.createElement(Button, {\n      onClick: () => this.openContribution(this.state.selectedPlace.id),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 153\n      },\n      __self: this\n    }, \"Read more\")))) : null);\n  }\n\n}\nMaps.defaultProps = {\n  mapStyles: [{\n    elementType: 'geometry',\n    stylers: [{\n      color: '#242f3e'\n    }]\n  }, {\n    elementType: 'labels.text.fill',\n    stylers: [{\n      color: '#746855'\n    }]\n  }, {\n    elementType: 'labels.text.stroke',\n    stylers: [{\n      color: '#242f3e'\n    }]\n  }, {\n    featureType: 'administrative.land_parcel',\n    elementType: 'labels',\n    stylers: [{\n      visibility: 'off'\n    }]\n  }, {\n    featureType: 'administrative.locality',\n    elementType: 'labels.text.fill',\n    stylers: [{\n      color: '#d59563'\n    }]\n  }, {\n    featureType: 'poi',\n    elementType: 'labels.text',\n    stylers: [{\n      visibility: 'off'\n    }]\n  }, {\n    featureType: 'poi',\n    elementType: 'labels.text.fill',\n    stylers: [{\n      color: '#d59563'\n    }]\n  }, {\n    featureType: 'poi.business',\n    stylers: [{\n      visibility: 'off'\n    }]\n  }, {\n    featureType: 'poi.park',\n    elementType: 'geometry',\n    stylers: [{\n      color: '#263c3f'\n    }]\n  }, {\n    featureType: 'poi.park',\n    elementType: 'labels.text',\n    stylers: [{\n      visibility: 'off'\n    }]\n  }, {\n    featureType: 'poi.park',\n    elementType: 'labels.text.fill',\n    stylers: [{\n      color: '#6b9a76'\n    }]\n  }, {\n    featureType: 'road',\n    elementType: 'geometry',\n    stylers: [{\n      color: '#38414e'\n    }]\n  }, {\n    featureType: 'road',\n    elementType: 'geometry.stroke',\n    stylers: [{\n      color: '#212a37'\n    }]\n  }, {\n    featureType: 'road',\n    elementType: 'labels.text.fill',\n    stylers: [{\n      color: '#9ca5b3'\n    }]\n  }, {\n    featureType: 'road.highway',\n    elementType: 'geometry',\n    stylers: [{\n      color: '#746855'\n    }]\n  }, {\n    featureType: 'road.highway',\n    elementType: 'geometry.stroke',\n    stylers: [{\n      color: '#1f2835'\n    }]\n  }, {\n    featureType: 'road.highway',\n    elementType: 'labels.text.fill',\n    stylers: [{\n      color: '#f3d19c'\n    }]\n  }, {\n    featureType: 'road.local',\n    elementType: 'labels',\n    stylers: [{\n      visibility: 'off'\n    }]\n  }, {\n    featureType: 'transit',\n    elementType: 'geometry',\n    stylers: [{\n      color: '#2f3948'\n    }]\n  }, {\n    featureType: 'transit.station',\n    elementType: 'labels.text.fill',\n    stylers: [{\n      color: '#d59563'\n    }]\n  }, {\n    featureType: 'water',\n    elementType: 'geometry',\n    stylers: [{\n      color: '#17263c'\n    }]\n  }, {\n    featureType: 'water',\n    elementType: 'labels.text.fill',\n    stylers: [{\n      color: '#515c6d'\n    }]\n  }, {\n    featureType: 'water',\n    elementType: 'labels.text.stroke',\n    stylers: [{\n      color: '#17263c'\n    }]\n  }]\n};\n\nfunction mapStateToProps(state) {\n  return {\n    x: state.x,\n    y: state.y\n  };\n}\n\nexport default connect(mapStateToProps, {\n  saveMapCoords\n})(GoogleApiWrapper({\n  apiKey: 'AIzaSyCw1Cu5QmZqsFLWq-D7m12E3Qqjjj13xWY'\n})(Maps));","map":{"version":3,"sources":["/Users/anasshar/Documents/GitHub/SEI/projects/Steak/coffee/src/components/Test.jsx"],"names":["React","Component","Map","GoogleApiWrapper","Marker","connect","saveMapCoords","Redirect","Button","InfoWindowEx","uuidv1","require","Maps","state","data","loc_x","loc_y","locRendered","showingInfoWindow","activeMarker","selectedPlace","redirect","redirectId","getUserLocation","navigator","geolocation","getCurrentPosition","showPosition","position","setState","coords","latitude","longitude","fetchRequestLocations","fetch","method","headers","localStorage","getItem","then","res","json","setTimeout","saveCoords","mapProps","map","clickEven","window","location","pathname","props","latLng","lat","lng","document","querySelector","style","visibility","openContribution","id","renderRedirect","centerMoved","center","onMarkerClick","marker","componentWillMount","componentDidMount","render","google","mapStyles","m","status","request_type","x","y","title","url","anchor","maps","Point","scaledSize","Size","description","defaultProps","elementType","stylers","color","featureType","mapStateToProps","apiKey"],"mappings":"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","sourcesContent":["import React, { Component } from 'react'\nimport { Map, GoogleApiWrapper, Marker } from 'google-maps-react'\nimport { connect } from 'react-redux'\nimport { saveMapCoords } from '../redux/actions/index'\nimport { Redirect } from 'react-router-dom'\nimport { Button } from 'semantic-ui-react'\nimport InfoWindowEx from './infoWindowEx'\n\nimport '../styles/navbar.scss'\n\nconst uuidv1 = require('uuid/v1')\n\nexport class Maps extends Component {\n    state = {\n        data: [],\n        loc_x: 0,\n        loc_y: 0,\n        locRendered: false,\n        showingInfoWindow: false,\n        activeMarker: {},\n        selectedPlace: {},\n        redirect: false,\n        redirectId: 0\n    }\n\n    getUserLocation = () => {\n        if (navigator.geolocation) {\n            navigator.geolocation.getCurrentPosition(this.showPosition)\n        }\n    }\n\n    showPosition = position => {\n        this.setState({\n            loc_x: position.coords.latitude,\n            loc_y: position.coords.longitude,\n            locRendered: true\n        })\n    }\n\n    fetchRequestLocations = () => {\n        fetch(`https://neighborapp-backend.herokuapp.com/requests/`, {\n            method: 'GET',\n            headers: {\n                'Content-Type': 'application/json',\n                'X-User-Email': localStorage.getItem('email'),\n                'X-User-Token': localStorage.getItem('token')\n            }\n        })\n            .then(res => res.json())\n            .then(data => {\n                this.setState({ data: data.data })\n                setTimeout(() => {\n                    this.fetchRequestLocations()\n                }, 20000)\n            })\n    }\n\n    saveCoords = (mapProps, map, clickEven) => {\n        if (window.location.pathname === '/c/request') {\n            this.props.saveMapCoords(clickEven.latLng.lat(), clickEven.latLng.lng())\n            document.querySelector('.custom-modal').style.visibility = 'visible'\n            document.querySelector('.fader').style.visibility = 'visible'\n        }\n    }\n\n    openContribution = id => {\n        document.querySelector('.fader').style.visibility = 'visible'\n        this.setState({\n            redirect: true,\n            redirectId: id,\n            showingInfoWindow: false\n        })\n    }\n\n    renderRedirect = () => {\n        if (this.state.redirect) {\n            return <Redirect to={`/c/contribution/${this.state.redirectId}`} />\n        }\n    }\n\n    centerMoved = (mapProps, map) => {\n        this.setState({\n            loc_x: map.center.lat(),\n            loc_y: map.center.lng()\n        })\n    }\n\n    componentWillMount() {\n        this.getUserLocation()\n    }\n\n    componentDidMount() {\n        this.fetchRequestLocations()\n    }\n\n    render() {\n        return (\n            <div>\n                {this.renderRedirect()}\n                {this.state.locRendered ? (\n                    <Map\n                        google={this.props.google}\n                        zoom={14}\n                        styles={this.props.mapStyles}\n                        disableDefaultUI={true}\n                        onClick={this.saveCoords}\n                        onDragend={this.centerMoved}\n                        initialCenter={{\n                            lat: this.state.loc_x,\n                            lng: this.state.loc_y\n                        }}\n                    >\n                        {this.state.data.map(m => {\n                            if (m.status === 'open') {\n                                if (m.request_type === 'normal') {\n                                    return (\n                                        <Marker\n                                            key={uuidv1()}\n                                            position={{ lat: m.x, lng: m.y }}\n                                            title={m.title}\n                                            data={m}\n                                            onClick={this.onMarkerClick}\n                                            icon={{\n                                                url: '../../data/welfareroom.png',\n                                                anchor: new this.props.google.maps.Point(48, 48),\n                                                scaledSize: new this.props.google.maps.Size(48, 48)\n                                            }}\n                                        />\n                                    )\n                                } else {\n                                    return (\n                                        <Marker\n                                            key={uuidv1()}\n                                            position={{ lat: m.x, lng: m.y }}\n                                            title={m.title}\n                                            data={m}\n                                            onClick={this.onMarkerClick}\n                                            icon={{\n                                                url: '../../data/tortillas1.png',\n                                                anchor: new this.props.google.maps.Point(48, 48),\n                                                scaledSize: new this.props.google.maps.Size(48, 48)\n                                            }}\n                                        />\n                                    )\n                                }\n                            }\n                        })}\n                        <InfoWindowEx marker={this.state.activeMarker} visible={this.state.showingInfoWindow}>\n                            <div>\n                                <h1>{this.state.selectedPlace.title}</h1>\n                                <div>{this.state.selectedPlace.description}</div>\n                                <br />\n                                <Button onClick={() => this.openContribution(this.state.selectedPlace.id)}>\n                                    Read more\n                                </Button>\n                            </div>\n                        </InfoWindowEx>\n                    </Map>\n                ) : null}\n            </div>\n        )\n    }\n\n    onMarkerClick = (props, marker) => {\n        this.setState({\n            selectedPlace: props.data,\n            activeMarker: marker,\n            showingInfoWindow: true,\n            redirect: false\n        })\n    }\n}\n\nMaps.defaultProps = {\n    mapStyles: [\n        {\n            elementType: 'geometry',\n            stylers: [\n                {\n                    color: '#242f3e'\n                }\n            ]\n        },\n        {\n            elementType: 'labels.text.fill',\n            stylers: [\n                {\n                    color: '#746855'\n                }\n            ]\n        },\n        {\n            elementType: 'labels.text.stroke',\n            stylers: [\n                {\n                    color: '#242f3e'\n                }\n            ]\n        },\n        {\n            featureType: 'administrative.land_parcel',\n            elementType: 'labels',\n            stylers: [\n                {\n                    visibility: 'off'\n                }\n            ]\n        },\n        {\n            featureType: 'administrative.locality',\n            elementType: 'labels.text.fill',\n            stylers: [\n                {\n                    color: '#d59563'\n                }\n            ]\n        },\n        {\n            featureType: 'poi',\n            elementType: 'labels.text',\n            stylers: [\n                {\n                    visibility: 'off'\n                }\n            ]\n        },\n        {\n            featureType: 'poi',\n            elementType: 'labels.text.fill',\n            stylers: [\n                {\n                    color: '#d59563'\n                }\n            ]\n        },\n        {\n            featureType: 'poi.business',\n            stylers: [\n                {\n                    visibility: 'off'\n                }\n            ]\n        },\n        {\n            featureType: 'poi.park',\n            elementType: 'geometry',\n            stylers: [\n                {\n                    color: '#263c3f'\n                }\n            ]\n        },\n        {\n            featureType: 'poi.park',\n            elementType: 'labels.text',\n            stylers: [\n                {\n                    visibility: 'off'\n                }\n            ]\n        },\n        {\n            featureType: 'poi.park',\n            elementType: 'labels.text.fill',\n            stylers: [\n                {\n                    color: '#6b9a76'\n                }\n            ]\n        },\n        {\n            featureType: 'road',\n            elementType: 'geometry',\n            stylers: [\n                {\n                    color: '#38414e'\n                }\n            ]\n        },\n        {\n            featureType: 'road',\n            elementType: 'geometry.stroke',\n            stylers: [\n                {\n                    color: '#212a37'\n                }\n            ]\n        },\n        {\n            featureType: 'road',\n            elementType: 'labels.text.fill',\n            stylers: [\n                {\n                    color: '#9ca5b3'\n                }\n            ]\n        },\n        {\n            featureType: 'road.highway',\n            elementType: 'geometry',\n            stylers: [\n                {\n                    color: '#746855'\n                }\n            ]\n        },\n        {\n            featureType: 'road.highway',\n            elementType: 'geometry.stroke',\n            stylers: [\n                {\n                    color: '#1f2835'\n                }\n            ]\n        },\n        {\n            featureType: 'road.highway',\n            elementType: 'labels.text.fill',\n            stylers: [\n                {\n                    color: '#f3d19c'\n                }\n            ]\n        },\n        {\n            featureType: 'road.local',\n            elementType: 'labels',\n            stylers: [\n                {\n                    visibility: 'off'\n                }\n            ]\n        },\n        {\n            featureType: 'transit',\n            elementType: 'geometry',\n            stylers: [\n                {\n                    color: '#2f3948'\n                }\n            ]\n        },\n        {\n            featureType: 'transit.station',\n            elementType: 'labels.text.fill',\n            stylers: [\n                {\n                    color: '#d59563'\n                }\n            ]\n        },\n        {\n            featureType: 'water',\n            elementType: 'geometry',\n            stylers: [\n                {\n                    color: '#17263c'\n                }\n            ]\n        },\n        {\n            featureType: 'water',\n            elementType: 'labels.text.fill',\n            stylers: [\n                {\n                    color: '#515c6d'\n                }\n            ]\n        },\n        {\n            featureType: 'water',\n            elementType: 'labels.text.stroke',\n            stylers: [\n                {\n                    color: '#17263c'\n                }\n            ]\n        }\n    ]\n}\n\nfunction mapStateToProps(state) {\n    return {\n        x: state.x,\n        y: state.y\n    }\n}\n\nexport default connect(\n    mapStateToProps,\n    { saveMapCoords }\n)(\n    GoogleApiWrapper({\n        apiKey: 'AIzaSyCw1Cu5QmZqsFLWq-D7m12E3Qqjjj13xWY'\n    })(Maps)\n)"]},"metadata":{},"sourceType":"module"}